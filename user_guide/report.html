

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Classifier evaluation using the OOP interface (report generation) &mdash; sklearn-evaluation 0.4dev documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="sklearn-evaluation 0.4dev documentation" href="../index.html"/>
        <link rel="up" title="User Guide" href="../user_guide.html"/>
        <link rel="next" title="Functional vs Object Oriented interface" href="func_vs_oop.html"/>
        <link rel="prev" title="Classifier evaluation" href="classifier.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> sklearn-evaluation
          

          
          </a>

          
            
            
              <div class="version">
                0.4dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="classifier.html">Classifier evaluation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Classifier evaluation using the OOP interface (report generation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_vs_oop.html">Functional vs Object Oriented interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_search.html">Evaluating Grid Search Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="matplotlib.html">Advanced usage using matplotlib</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">sklearn-evaluation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../user_guide.html">User Guide</a> &raquo;</li>
      
    <li>Classifier evaluation using the OOP interface (report generation)</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user_guide/report.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="classifier-evaluation-using-the-oop-interface-report-generation">
<h1>Classifier evaluation using the OOP interface (report generation)<a class="headerlink" href="#classifier-evaluation-using-the-oop-interface-report-generation" title="Permalink to this headline">Â¶</a></h1>
<p>We can also use the <a class="reference internal" href="../api/evaluator.html#sklearn_evaluation.ClassifierEvaluator" title="sklearn_evaluation.ClassifierEvaluator"><code class="xref py py-class docutils literal"><span class="pre">sklearn_evaluation.ClassifierEvaluator</span></code></a> class to pack the results from our
estimator. This way we can generate plots and tables without having to pass
the parameters over and over again. If we are evaluating more than one model
at a time this also gives us a way to keep it organized. Furthermore, the ClassifierEvaluator class offers a way to create HTML reports
from our model results.</p>
<p>First, let&#8217;s load some data and split for training and testing.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">iris</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">()</span>

<span class="gp">In [2]: </span><span class="n">X</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">data</span>

<span class="gp">In [3]: </span><span class="n">y</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span>

<span class="gp">In [4]: </span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s now train a classifier and predict on the test set.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">est</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">()</span>

<span class="gp">In [6]: </span><span class="n">est</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="go"> Out[6]: </span>
<span class="go">RandomForestClassifier(bootstrap=True, class_weight=None, criterion=&#39;gini&#39;,</span>
<span class="go">            max_depth=None, max_features=&#39;auto&#39;, max_leaf_nodes=None,</span>
<span class="go">            min_samples_leaf=1, min_samples_split=2,</span>
<span class="go">            min_weight_fraction_leaf=0.0, n_estimators=10, n_jobs=1,</span>
<span class="go">            oob_score=False, random_state=None, verbose=0,</span>
<span class="go">            warm_start=False)</span>

<span class="gp">In [7]: </span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">est</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">y_score</span> <span class="o">=</span> <span class="n">est</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="gp">In [9]: </span><span class="n">feature_list</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [10]: </span><span class="n">target_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;setosa&#39;</span><span class="p">,</span> <span class="s1">&#39;versicolor&#39;</span><span class="p">,</span> <span class="s1">&#39;virginica&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now that we have everything we need, let&#8217;s pack our results using
ClassifierEvaluator, every parameter is optional.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">ce</span> <span class="o">=</span> <span class="n">ClassifierEvaluator</span><span class="p">(</span><span class="n">est</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y_score</span><span class="p">,</span>
<span class="gp">   ....: </span>                 <span class="n">feature_list</span><span class="p">,</span> <span class="n">target_names</span><span class="p">,</span>
<span class="gp">   ....: </span>                 <span class="n">estimator_name</span><span class="o">=</span><span class="s1">&#39;RF&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>We can use most of the functions in plot and table directly from the
ClassifierEvaluator object, let&#8217;s see how to plot a confusion matrix.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">ce</span><span class="o">.</span><span class="n">confusion_matrix</span>
<span class="gh">Out[12]: </span><span class="go">&lt;matplotlib.axes._subplots.AxesSubplot at 0x2b1058b5e990&gt;</span>
</pre></div>
</div>
<img alt="../_images/cm_2.png" src="../_images/cm_2.png" />
<p>We can also generate HTML reports from our models by using the generate_report
function. The first parameter is a markdown template, we can either directly
pass a string or a path to a template.</p>
<p>We can include any attribute in the ClassifierEvaluator by passing a tag
with the format <code class="docutils literal"><span class="pre">{attribute}</span></code>. Two extra tags are available <code class="docutils literal"><span class="pre">{date}</span></code> and
<code class="docutils literal"><span class="pre">{date_utc}</span></code> which add local and UTC timestamps respectively.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">   ....: </span><span class="s1">            {estimator_type}</span>
<span class="gp">   ....: </span><span class="s1">            {date}</span>
<span class="gp">   ....: </span><span class="s1">            {confusion_matrix}</span>
<span class="gp">   ....: </span><span class="s1">            {roc}</span>
<span class="gp">   ....: </span><span class="s1">            {precision_recall}</span>
<span class="gp">   ....: </span><span class="s1">           &#39;&#39;&#39;</span>
<span class="gp">   ....: </span>

<span class="gp">In [14]: </span><span class="n">report</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">generate_report</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</pre></div>
</div>
<p>The function will return an HTML string containing the report (images are
included in the same file). If we want to save it, we can use the path
parameter. Finally, if we want to apply custom CSS, we can use the style
parameter with a path to a CSS file.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="func_vs_oop.html" class="btn btn-neutral float-right" title="Functional vs Object Oriented interface" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="classifier.html" class="btn btn-neutral" title="Classifier evaluation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Eduardo Blancas Reyes.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.4dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>